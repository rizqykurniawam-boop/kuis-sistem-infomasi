<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kuis Sistem Informasi</title>
    <style>
        body {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100%;
            color: #333;
        }

        html {
            height: 100%;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        .quiz-header {
            text-align: center;
            margin-bottom: 30px;
            animation: slideDown 0.8s ease-out;
        }

        .quiz-header h1 {
            color: white;
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .quiz-header p {
            color: rgba(255,255,255,0.9);
            font-size: 1.1rem;
        }

        .quiz-card {
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            margin-bottom: 20px;
            transform: translateY(20px);
            opacity: 0;
            animation: slideUp 0.6s ease-out forwards;
        }

        .question-counter {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            padding: 10px 20px;
            border-radius: 25px;
            display: inline-block;
            margin-bottom: 20px;
            font-weight: bold;
            animation: pulse 2s infinite;
        }

        .question {
            font-size: 1.3rem;
            font-weight: 600;
            margin-bottom: 25px;
            color: #2c3e50;
            line-height: 1.4;
        }

        .options {
            display: grid;
            gap: 15px;
        }

        .option {
            background: #f8f9fa;
            border: 2px solid #e9ecef;
            border-radius: 12px;
            padding: 15px 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .option:hover {
            border-color: #667eea;
            background: #f0f4ff;
            transform: translateX(5px);
        }

        .option.selected {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-color: #667eea;
            transform: scale(1.02);
        }

        .option.correct {
            background: linear-gradient(135deg, #4caf50 0%, #45a049 100%);
            color: white;
            border-color: #4caf50;
            animation: correctAnswer 0.6s ease-out;
        }

        .option.incorrect {
            background: linear-gradient(135deg, #f44336 0%, #d32f2f 100%);
            color: white;
            border-color: #f44336;
            animation: shake 0.6s ease-out;
        }

        .option-letter {
            display: inline-block;
            width: 30px;
            height: 30px;
            background: rgba(255,255,255,0.2);
            border-radius: 50%;
            text-align: center;
            line-height: 30px;
            margin-right: 15px;
            font-weight: bold;
        }

        .controls {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 30px;
        }

        .btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(102, 126, 234, 0.3);
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: #e9ecef;
            border-radius: 4px;
            overflow: hidden;
            margin-bottom: 20px;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #4caf50, #45a049);
            border-radius: 4px;
            transition: width 0.5s ease;
        }

        .score-display {
            text-align: center;
            font-size: 1.2rem;
            margin-bottom: 20px;
            color: #2c3e50;
        }

        .results {
            text-align: center;
            padding: 40px 20px;
        }

        .results h2 {
            font-size: 2.5rem;
            margin-bottom: 20px;
            color: #2c3e50;
        }

        .score-circle {
            width: 150px;
            height: 150px;
            border-radius: 50%;
            background: linear-gradient(135deg, #4caf50 0%, #45a049 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 20px auto;
            color: white;
            font-size: 2rem;
            font-weight: bold;
            animation: scaleIn 0.8s ease-out;
        }

        .admin-panel {
            background: rgba(0,0,0,0.9);
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 1000;
        }

        .admin-content {
            background: white;
            padding: 30px;
            border-radius: 15px;
            max-width: 600px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
        }

        .admin-login {
            text-align: center;
            padding: 40px;
        }

        .admin-login input {
            width: 100%;
            padding: 15px;
            border: 2px solid #ddd;
            border-radius: 10px;
            font-size: 1.1rem;
            margin: 10px 0;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .stat-card {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            border-left: 4px solid #667eea;
        }

        .admin-toggle {
            position: fixed;
            top: 20px;
            right: 20px;
            background: rgba(0,0,0,0.7);
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 0.9rem;
            z-index: 100;
        }

        @keyframes slideDown {
            from { transform: translateY(-50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        @keyframes slideUp {
            to { transform: translateY(0); opacity: 1; }
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        @keyframes correctAnswer {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }

        @keyframes scaleIn {
            from { transform: scale(0); }
            to { transform: scale(1); }
        }

        .floating-particles {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: -1;
        }

        .particle {
            position: absolute;
            width: 4px;
            height: 4px;
            background: rgba(255,255,255,0.6);
            border-radius: 50%;
            animation: float 6s infinite linear;
        }

        @keyframes float {
            0% { transform: translateY(100vh) rotate(0deg); opacity: 0; }
            10% { opacity: 1; }
            90% { opacity: 1; }
            100% { transform: translateY(-10px) rotate(360deg); opacity: 0; }
        }

        @media (max-width: 768px) {
            .quiz-header h1 { font-size: 2rem; }
            .quiz-card { padding: 20px; }
            .question { font-size: 1.1rem; }
            .controls { flex-direction: column; gap: 15px; }
        }
    </style>
</head>
<body>
    <div class="floating-particles" id="particles"></div>
    
    <button class="admin-toggle" onclick="toggleAdmin()">Admin</button>

    <div class="container">
        <div class="quiz-header">
            <h1>üñ•Ô∏è Kuis Sistem Informasi</h1>
            <p>Uji pengetahuan Anda tentang sistem informasi dengan kuis interaktif ini!</p>
        </div>

        <!-- Username Input -->
        <div class="quiz-card" id="usernameCard">
            <div style="text-align: center;">
                <h2>üë§ Selamat Datang!</h2>
                <p>Masukkan nama Anda untuk memulai kuis:</p>
                <input type="text" id="usernameInput" placeholder="Nama lengkap Anda..." style="width: 100%; padding: 15px; border: 2px solid #ddd; border-radius: 10px; font-size: 1.1rem; margin: 20px 0; text-align: center;">
                <br>
                <button class="btn" onclick="startQuiz()" id="startBtn" disabled>
                    üöÄ Mulai Kuis
                </button>
            </div>
        </div>

        <div class="quiz-card" id="quizCard" style="display: none;">
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>
            
            <div class="score-display">
                <span>Skor: <strong id="currentScore">0</strong> / <span id="totalQuestions">5</span></span>
            </div>

            <div class="question-counter" id="questionCounter">
                Pertanyaan 1 dari 5
            </div>

            <div class="question" id="questionText">
                Loading...
            </div>

            <div class="options" id="optionsContainer">
                <!-- Options will be populated by JavaScript -->
            </div>

            <div class="controls">
                <button class="btn" id="prevBtn" onclick="previousQuestion()" disabled>
                    ‚Üê Sebelumnya
                </button>
                <button class="btn" id="nextBtn" onclick="nextQuestion()" disabled>
                    Selanjutnya ‚Üí
                </button>
            </div>
        </div>
    </div>

    <!-- Admin Panel -->
    <div class="admin-panel" id="adminPanel">
        <div class="admin-content">
            <div id="adminLogin" class="admin-login">
                <h2>üîê Admin Login</h2>
                <input type="password" id="adminPassword" placeholder="Masukkan password admin">
                <br><br>
                <button class="btn" onclick="adminLogin()">Login</button>
                <button class="btn" onclick="closeAdmin()" style="background: #f44336;">Batal</button>
            </div>
            
            <div id="adminDashboard" style="display: none;">
                <h2>üìä Dashboard Admin</h2>
                <div class="stats-grid">
                    <div class="stat-card">
                        <h3>Total Attempts</h3>
                        <div style="font-size: 2rem; color: #667eea;" id="totalAttempts">0</div>
                    </div>
                    <div class="stat-card">
                        <h3>Rata-rata Skor</h3>
                        <div style="font-size: 2rem; color: #4caf50;" id="averageScore">0%</div>
                    </div>
                    <div class="stat-card">
                        <h3>Skor Tertinggi</h3>
                        <div style="font-size: 2rem; color: #f5576c;" id="highestScore">0%</div>
                    </div>
                    <div class="stat-card">
                        <h3>Completion Rate</h3>
                        <div style="font-size: 2rem; color: #764ba2;" id="completionRate">0%</div>
                    </div>
                </div>
                
                <h3>üìà Statistik Pertanyaan</h3>
                <div id="questionStats"></div>
                
                <h3>üë• Daftar Pengguna</h3>
                <div id="usersList" style="max-height: 300px; overflow-y: auto; background: #f8f9fa; padding: 15px; border-radius: 10px; margin: 15px 0;"></div>
                
                <br>
                <button class="btn" onclick="resetStats()" style="background: #f44336;">Reset Statistik</button>
                <button class="btn" onclick="exportData()" style="background: #4caf50;">Export Data</button>
                <button class="btn" onclick="closeAdmin()">Tutup</button>
            </div>
        </div>
    </div>

    <script>
        const questions = [
            {
                question: "Apa yang dimaksud dengan sistem informasi?",
                options: [
                    "Kumpulan komputer yang terhubung dalam jaringan",
                    "Kombinasi teknologi informasi, aktivitas orang, dan proses untuk mengumpulkan, memproses, menyimpan, dan menyebarkan informasi",
                    "Software aplikasi yang digunakan untuk mengelola data",
                    "Hardware komputer beserta perangkat pendukungnya"
                ],
                correct: 1,
                explanation: "Sistem informasi adalah kombinasi dari teknologi informasi, aktivitas atau kegiatan orang, dan proses-proses untuk mengumpulkan, memproses, menyimpan, dan menyebarkan informasi dalam suatu organisasi."
            },
            {
                question: "Apa saja komponen utama dalam sistem informasi?",
                options: [
                    "Hardware, Software, Data, Prosedur, dan Manusia",
                    "Input, Process, Output",
                    "Server, Client, Database",
                    "Frontend, Backend, Database"
                ],
                correct: 0,
                explanation: "Komponen utama sistem informasi terdiri dari 5 elemen: Hardware (perangkat keras), Software (perangkat lunak), Data, Prosedur (aturan dan kebijakan), dan Manusia (brainware)."
            },
            {
                question: "Jelaskan perbedaan antara data dan informasi!",
                options: [
                    "Data dan informasi adalah hal yang sama",
                    "Data adalah fakta mentah, sedangkan informasi adalah data yang telah diproses dan memiliki makna",
                    "Data lebih penting daripada informasi",
                    "Informasi adalah kumpulan data yang besar"
                ],
                correct: 1,
                explanation: "Data adalah fakta mentah yang belum diproses, seperti angka atau teks. Informasi adalah data yang telah diproses, dianalisis, dan diberi konteks sehingga memiliki makna dan berguna untuk pengambilan keputusan."
            },
            {
                question: "Mengapa sistem informasi penting bagi organisasi atau perusahaan?",
                options: [
                    "Hanya untuk menyimpan data karyawan",
                    "Membantu pengambilan keputusan, meningkatkan efisiensi, dan memberikan keunggulan kompetitif",
                    "Untuk menggantikan semua pekerjaan manusia",
                    "Hanya untuk keperluan akuntansi"
                ],
                correct: 1,
                explanation: "Sistem informasi penting karena membantu organisasi dalam pengambilan keputusan yang lebih baik, meningkatkan efisiensi operasional, mengurangi biaya, dan memberikan keunggulan kompetitif di pasar."
            },
            {
                question: "Sebutkan contoh penerapan sistem informasi dalam kehidupan sehari-hari!",
                options: [
                    "Hanya sistem perbankan online",
                    "ATM, E-commerce, Sistem Reservasi Online, Aplikasi Mobile Banking, dan Media Sosial",
                    "Hanya komputer dan internet",
                    "Hanya aplikasi chatting"
                ],
                correct: 1,
                explanation: "Contoh penerapan sistem informasi dalam kehidupan sehari-hari sangat beragam, seperti ATM, e-commerce (Tokopedia, Shopee), sistem reservasi online (tiket pesawat, hotel), mobile banking, media sosial, dan aplikasi transportasi online."
            },
            {
                question: "Apa yang dimaksud dengan database dalam sistem informasi?",
                options: [
                    "Kumpulan file yang tersimpan di komputer",
                    "Kumpulan data yang terorganisir dan dapat diakses, dikelola, serta diperbarui dengan mudah",
                    "Software untuk membuat aplikasi",
                    "Jaringan komputer yang terhubung"
                ],
                correct: 1,
                explanation: "Database adalah kumpulan data yang terorganisir secara sistematis dan dapat diakses, dikelola, serta diperbarui dengan mudah menggunakan sistem manajemen database (DBMS)."
            },
            {
                question: "Apa fungsi utama dari DBMS (Database Management System)?",
                options: [
                    "Hanya untuk menyimpan data",
                    "Mengelola, mengorganisir, dan mengontrol akses ke database",
                    "Membuat website",
                    "Menghubungkan komputer ke internet"
                ],
                correct: 1,
                explanation: "DBMS berfungsi untuk mengelola, mengorganisir, dan mengontrol akses ke database, termasuk menyimpan, mengambil, memperbarui, dan menghapus data dengan aman dan efisien."
            },
            {
                question: "Apa yang dimaksud dengan sistem informasi manajemen (SIM)?",
                options: [
                    "Sistem untuk mengelola karyawan saja",
                    "Sistem informasi yang menyediakan informasi untuk mendukung pengambilan keputusan manajerial",
                    "Software akuntansi",
                    "Sistem keamanan komputer"
                ],
                correct: 1,
                explanation: "Sistem Informasi Manajemen (SIM) adalah sistem informasi yang dirancang khusus untuk menyediakan informasi yang diperlukan manajemen dalam pengambilan keputusan operasional, taktis, dan strategis."
            },
            {
                question: "Apa perbedaan antara sistem informasi dan teknologi informasi?",
                options: [
                    "Keduanya sama saja",
                    "Sistem informasi lebih luas mencakup manusia dan proses, sedangkan teknologi informasi fokus pada perangkat keras dan lunak",
                    "Teknologi informasi lebih penting",
                    "Sistem informasi hanya untuk bisnis"
                ],
                correct: 1,
                explanation: "Sistem informasi mencakup aspek yang lebih luas termasuk manusia, proses, dan teknologi untuk mengelola informasi. Teknologi informasi lebih fokus pada perangkat keras, perangkat lunak, dan infrastruktur teknis."
            },
            {
                question: "Apa yang dimaksud dengan keamanan sistem informasi?",
                options: [
                    "Hanya menggunakan password yang kuat",
                    "Perlindungan menyeluruh terhadap data, sistem, dan infrastruktur dari ancaman internal dan eksternal",
                    "Memasang antivirus saja",
                    "Backup data secara rutin"
                ],
                correct: 1,
                explanation: "Keamanan sistem informasi adalah perlindungan menyeluruh yang mencakup confidentiality (kerahasiaan), integrity (integritas), dan availability (ketersediaan) data dan sistem dari berbagai ancaman internal maupun eksternal."
            }
        ];

        let currentQuestion = 0;
        let score = 0;
        let selectedAnswer = null;
        let quizCompleted = false;
        let userAnswers = [];
        let currentUser = '';
        let quizStats = JSON.parse(localStorage.getItem('quizStats')) || {
            attempts: 0,
            scores: [],
            questionStats: {},
            completions: 0,
            users: []
        };

        function initializeQuiz() {
            createParticles();
            setupUsernameInput();
        }

        function setupUsernameInput() {
            const usernameInput = document.getElementById('usernameInput');
            const startBtn = document.getElementById('startBtn');
            
            usernameInput.addEventListener('input', function() {
                const username = this.value.trim();
                startBtn.disabled = username.length < 2;
                if (username.length >= 2) {
                    startBtn.style.opacity = '1';
                    startBtn.style.transform = 'scale(1.05)';
                } else {
                    startBtn.style.opacity = '0.5';
                    startBtn.style.transform = 'scale(1)';
                }
            });

            usernameInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter' && !startBtn.disabled) {
                    startQuiz();
                }
            });
        }

        function startQuiz() {
            const username = document.getElementById('usernameInput').value.trim();
            if (username.length < 2) {
                alert('Nama harus minimal 2 karakter!');
                return;
            }
            
            currentUser = username;
            document.getElementById('usernameCard').style.display = 'none';
            document.getElementById('quizCard').style.display = 'block';
            
            // Initialize quiz content
            document.getElementById('quizCard').innerHTML = `
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill"></div>
                </div>
                
                <div class="score-display">
                    <span>üë§ <strong>${currentUser}</strong> | Skor: <strong id="currentScore">0</strong> / <span id="totalQuestions">10</span></span>
                </div>

                <div class="question-counter" id="questionCounter">
                    Pertanyaan 1 dari 10
                </div>

                <div class="question" id="questionText">
                    Loading...
                </div>

                <div class="options" id="optionsContainer">
                </div>

                <div class="controls">
                    <button class="btn" id="prevBtn" onclick="previousQuestion()" disabled>
                        ‚Üê Sebelumnya
                    </button>
                    <button class="btn" id="nextBtn" onclick="nextQuestion()" disabled>
                        Selanjutnya ‚Üí
                    </button>
                </div>
            `;
            
            displayQuestion();
            updateProgress();
            updateScore();
        }

        function createParticles() {
            const particlesContainer = document.getElementById('particles');
            for (let i = 0; i < 20; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                particle.style.left = Math.random() * 100 + '%';
                particle.style.animationDelay = Math.random() * 6 + 's';
                particle.style.animationDuration = (Math.random() * 3 + 3) + 's';
                particlesContainer.appendChild(particle);
            }
        }

        function displayQuestion() {
            const question = questions[currentQuestion];
            document.getElementById('questionCounter').textContent = `Pertanyaan ${currentQuestion + 1} dari ${questions.length}`;
            document.getElementById('questionText').textContent = question.question;
            
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            
            question.options.forEach((option, index) => {
                const optionElement = document.createElement('div');
                optionElement.className = 'option';
                optionElement.innerHTML = `
                    <span class="option-letter">${String.fromCharCode(65 + index)}</span>
                    ${option}
                `;
                optionElement.onclick = () => selectOption(index, optionElement);
                optionsContainer.appendChild(optionElement);
            });

            // Update navigation buttons
            document.getElementById('prevBtn').disabled = currentQuestion === 0;
            document.getElementById('nextBtn').disabled = true;
            document.getElementById('nextBtn').textContent = currentQuestion === questions.length - 1 ? 'Selesai' : 'Selanjutnya ‚Üí';
            
            selectedAnswer = null;
        }

        function selectOption(index, element) {
            // Remove previous selections
            document.querySelectorAll('.option').forEach(opt => {
                opt.classList.remove('selected');
            });
            
            // Select current option
            element.classList.add('selected');
            selectedAnswer = index;
            document.getElementById('nextBtn').disabled = false;
        }

        function nextQuestion() {
            if (selectedAnswer === null) return;
            
            // Store user answer
            userAnswers[currentQuestion] = selectedAnswer;
            
            // Show correct answer
            const question = questions[currentQuestion];
            const options = document.querySelectorAll('.option');
            
            options.forEach((option, index) => {
                if (index === question.correct) {
                    option.classList.add('correct');
                } else if (index === selectedAnswer && selectedAnswer !== question.correct) {
                    option.classList.add('incorrect');
                }
            });

            // Update score
            if (selectedAnswer === question.correct) {
                score++;
                updateScore();
            }

            // Update question stats
            if (!quizStats.questionStats[currentQuestion]) {
                quizStats.questionStats[currentQuestion] = { correct: 0, total: 0 };
            }
            quizStats.questionStats[currentQuestion].total++;
            if (selectedAnswer === question.correct) {
                quizStats.questionStats[currentQuestion].correct++;
            }

            setTimeout(() => {
                if (currentQuestion < questions.length - 1) {
                    currentQuestion++;
                    displayQuestion();
                    updateProgress();
                } else {
                    showResults();
                }
            }, 2000);
        }

        function previousQuestion() {
            if (currentQuestion > 0) {
                currentQuestion--;
                displayQuestion();
                updateProgress();
            }
        }

        function updateProgress() {
            const progress = ((currentQuestion + 1) / questions.length) * 100;
            document.getElementById('progressFill').style.width = progress + '%';
        }

        function updateScore() {
            document.getElementById('currentScore').textContent = score;
            document.getElementById('totalQuestions').textContent = questions.length;
        }

        function showResults() {
            quizCompleted = true;
            const percentage = Math.round((score / questions.length) * 100);
            
            // Update stats with user data
            quizStats.attempts++;
            quizStats.scores.push(percentage);
            quizStats.completions++;
            
            // Save user result
            const userResult = {
                name: currentUser,
                score: percentage,
                correctAnswers: score,
                totalQuestions: questions.length,
                date: new Date().toLocaleString('id-ID'),
                answers: userAnswers.map((answer, index) => ({
                    question: index + 1,
                    userAnswer: answer,
                    correctAnswer: questions[index].correct,
                    isCorrect: answer === questions[index].correct
                }))
            };
            
            quizStats.users.push(userResult);
            localStorage.setItem('quizStats', JSON.stringify(quizStats));

            const quizCard = document.getElementById('quizCard');
            quizCard.innerHTML = `
                <div class="results">
                    <h2>üéâ Kuis Selesai!</h2>
                    <p style="font-size: 1.3rem; margin: 10px 0; color: #667eea;">
                        <strong>üë§ ${currentUser}</strong>
                    </p>
                    <div class="score-circle">
                        ${percentage}%
                    </div>
                    <p style="font-size: 1.2rem; margin: 20px 0;">
                        Anda menjawab <strong>${score}</strong> dari <strong>${questions.length}</strong> pertanyaan dengan benar!
                    </p>
                    <div style="text-align: left; max-width: 600px; margin: 30px auto;">
                        <h3>üìù Pembahasan:</h3>
                        ${questions.map((q, index) => `
                            <div style="margin: 20px 0; padding: 15px; background: #f8f9fa; border-radius: 10px; border-left: 4px solid ${userAnswers[index] === q.correct ? '#4caf50' : '#f44336'};">
                                <strong>Pertanyaan ${index + 1}:</strong> ${q.question}<br>
                                <strong>Jawaban Anda:</strong> ${q.options[userAnswers[index]] || 'Tidak dijawab'}<br>
                                <strong>Jawaban Benar:</strong> ${q.options[q.correct]}<br>
                                <em>${q.explanation}</em>
                            </div>
                        `).join('')}
                    </div>
                    <button class="btn" onclick="restartQuiz()" style="margin: 20px 10px;">
                        üîÑ Ulangi Kuis
                    </button>
                    <button class="btn" onclick="shareResults()" style="margin: 20px 10px; background: linear-gradient(135deg, #4caf50 0%, #45a049 100%);">
                        üì§ Bagikan Hasil
                    </button>
                </div>
            `;
        }

        function restartQuiz() {
            currentQuestion = 0;
            score = 0;
            selectedAnswer = null;
            quizCompleted = false;
            userAnswers = [];
            
            // Show username input again
            document.getElementById('quizCard').style.display = 'none';
            document.getElementById('usernameCard').style.display = 'block';
            document.getElementById('usernameInput').value = '';
            document.getElementById('startBtn').disabled = true;
            currentUser = '';
        }

        function shareResults() {
            const percentage = Math.round((score / questions.length) * 100);
            const text = `Saya baru saja menyelesaikan Kuis Sistem Informasi dengan skor ${percentage}% (${score}/${questions.length})! üéâ`;
            
            if (navigator.share) {
                navigator.share({
                    title: 'Hasil Kuis Sistem Informasi',
                    text: text
                });
            } else {
                // Fallback: copy to clipboard
                navigator.clipboard.writeText(text).then(() => {
                    alert('Hasil kuis telah disalin ke clipboard!');
                });
            }
        }

        // Admin functions
        function toggleAdmin() {
            document.getElementById('adminPanel').style.display = 'flex';
        }

        function closeAdmin() {
            document.getElementById('adminPanel').style.display = 'none';
            document.getElementById('adminLogin').style.display = 'block';
            document.getElementById('adminDashboard').style.display = 'none';
            document.getElementById('adminPassword').value = '';
        }

        function adminLogin() {
            const password = document.getElementById('adminPassword').value;
            if (password === '11022007') {
                document.getElementById('adminLogin').style.display = 'none';
                document.getElementById('adminDashboard').style.display = 'block';
                loadAdminStats();
            } else {
                alert('Password salah!');
            }
        }

        function loadAdminStats() {
            const stats = quizStats;
            
            document.getElementById('totalAttempts').textContent = stats.attempts;
            
            const avgScore = stats.scores.length > 0 ? 
                Math.round(stats.scores.reduce((a, b) => a + b, 0) / stats.scores.length) : 0;
            document.getElementById('averageScore').textContent = avgScore + '%';
            
            const highScore = stats.scores.length > 0 ? Math.max(...stats.scores) : 0;
            document.getElementById('highestScore').textContent = highScore + '%';
            
            const completionRate = stats.attempts > 0 ? 
                Math.round((stats.completions / stats.attempts) * 100) : 0;
            document.getElementById('completionRate').textContent = completionRate + '%';
            
            // Question statistics
            const questionStatsDiv = document.getElementById('questionStats');
            let questionStatsHTML = '';
            
            questions.forEach((question, index) => {
                const qStats = stats.questionStats[index] || { correct: 0, total: 0 };
                const accuracy = qStats.total > 0 ? Math.round((qStats.correct / qStats.total) * 100) : 0;
                
                questionStatsHTML += `
                    <div class="stat-card" style="margin: 10px 0;">
                        <h4>Pertanyaan ${index + 1}</h4>
                        <p style="font-size: 0.9rem; margin: 5px 0;">${question.question.substring(0, 50)}...</p>
                        <div style="font-size: 1.5rem; color: ${accuracy >= 70 ? '#4caf50' : accuracy >= 50 ? '#ff9800' : '#f44336'};">
                            ${accuracy}% benar
                        </div>
                        <small>${qStats.correct}/${qStats.total} jawaban benar</small>
                    </div>
                `;
            });
            
            questionStatsDiv.innerHTML = questionStatsHTML;
            
            // Display users list
            const usersListDiv = document.getElementById('usersList');
            let usersHTML = '';
            
            if (stats.users && stats.users.length > 0) {
                // Sort users by date (newest first)
                const sortedUsers = stats.users.sort((a, b) => new Date(b.date) - new Date(a.date));
                
                usersHTML = `
                    <div style="display: grid; gap: 10px;">
                        ${sortedUsers.map((user, index) => `
                            <div style="background: white; padding: 15px; border-radius: 8px; border-left: 4px solid ${user.score >= 80 ? '#4caf50' : user.score >= 60 ? '#ff9800' : '#f44336'};">
                                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
                                    <strong style="color: #2c3e50;">${user.name}</strong>
                                    <span style="background: ${user.score >= 80 ? '#4caf50' : user.score >= 60 ? '#ff9800' : '#f44336'}; color: white; padding: 4px 8px; border-radius: 12px; font-size: 0.9rem;">
                                        ${user.score}%
                                    </span>
                                </div>
                                <div style="font-size: 0.9rem; color: #666;">
                                    üìÖ ${user.date} | ‚úÖ ${user.correctAnswers}/${user.totalQuestions} benar
                                </div>
                            </div>
                        `).join('')}
                    </div>
                `;
            } else {
                usersHTML = '<p style="text-align: center; color: #666; font-style: italic;">Belum ada pengguna yang mengikuti kuis</p>';
            }
            
            usersListDiv.innerHTML = usersHTML;
        }

        function resetStats() {
            if (confirm('Apakah Anda yakin ingin mereset semua statistik?')) {
                localStorage.removeItem('quizStats');
                quizStats = {
                    attempts: 0,
                    scores: [],
                    questionStats: {},
                    completions: 0,
                    users: []
                };
                loadAdminStats();
                alert('Statistik telah direset!');
            }
        }

        function exportData() {
            const dataStr = JSON.stringify(quizStats, null, 2);
            const dataBlob = new Blob([dataStr], {type: 'application/json'});
            const url = URL.createObjectURL(dataBlob);
            const link = document.createElement('a');
            link.href = url;
            link.download = `quiz-data-${new Date().toISOString().split('T')[0]}.json`;
            link.click();
            URL.revokeObjectURL(url);
        }

        // Initialize quiz when page loads
        window.onload = initializeQuiz;
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9921e2b67178008f',t:'MTc2MTA2MTU2NC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
